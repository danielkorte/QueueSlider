!function(a){var b=function(b,c){function d(){var a,b=0;switch(y.alignMode){case"center":a=(x-s[q])/-2;break;case"left":a=0;break;case"right":a=x-s[q]}for(b=0;q>b;b++)a+=s[b];return a}function e(){var b=0;v.each(function(c){if(y.offScreen){var d=a(this),e=d.innerWidth(),f=x-e;b+=s[c]=e+(f>0?f:0),d.css("width",s[c]+"px")}else b+=s[c]=a(this).innerWidth()}),u.css("width",b)}function f(a){q+=a,0>q?q=w:q>w&&(q=0),-1!==y.fade&&(v.eq(q).addClass("current").fadeTo(y.transitionSpeed,1),v.eq(r).removeClass("current").fadeTo(y.transitionSpeed,y.fade)),g(-d(),"slide")}function g(a,b,c){if(j){c=void 0!==c?c:y.transitionSpeed/1e3;var d={};d[m]=c+"s",d[l]="translate3d("+a+"px, 0, 0)",u.css(d),"slide"===b&&setTimeout(function(){p&&z()},1e3*c+1)}else"slide"===b?u.animate({left:a},{duration:y.transitionSpeed,complete:z}):u.css("left",a)}function h(){i={start:{x:0,y:0},end:{x:0,y:0}},t.bind("touchstart",A)}var i,j,k,l,m,n=this,o=!1,p=!1,q=1,r=1,s=[],t=a(b),u=a("ul.queue",t),v=a("li",u),w=v.length,x=a(window).width(),y=a.extend({},a.fn.queueSlider.defaults,c);a(window).resize(function(){p=!0,x=a(window).width(),e(),g(-d(),"reset",0),p=!1});var z=function(){if(w>2)if(q===w-1){var b=v.filter(":first-child");s.push(s.shift()),q--,g(-d(),"reset",0),v=a("li",u.append(b))}else if(0===q){var c=v.filter(":last-child");s.unshift(s.pop()),q=1,g(-d(),"reset",0),v=a("li",u.prepend(c))}r=q,p=!1},A=function(a){p?a.preventDefault():(i.originalPos=u.position(),i.start.x=a.originalEvent.changedTouches[0].pageX,i.start.y=a.originalEvent.changedTouches[0].pageY,t.bind("touchmove",B),t.bind("touchend",C))},B=function(a){var b=a.originalEvent.changedTouches[0].pageX-i.start.x;g(i.originalPos.left+b,"reset",0)},C=function(a){t.unbind("touchmove",B),i.end.x=a.originalEvent.changedTouches[0].pageX,i.end.y=a.originalEvent.changedTouches[0].pageY;var b=i.end.x-i.start.x;Math.abs(b)>=y.swipeThreshold?0>b?n.nextSlide():n.previousSlide():g(i.originalPos.left,"reset",0),t.unbind("touchend",C)};return n.nextSlide=function(){p||(p=!0,clearInterval(o),f(1))},n.previousSlide=function(){p||(p=!0,clearInterval(o),f(-1))},n.getCurrent=function(){return q},w>1&&(j=function(){var a=document.createElement("div"),b=["WebkitPerspective","MozPerspective","OPerspective","msPerspective"];for(var c in b)if(void 0!==a.style[b[c]])return k=b[c].replace("Perspective","").toLowerCase(),l="-"+k+"-transform",m="-"+k+"-transition-duration",!0;return!1}(),j&&u.css("-"+k+"-transition-timing-function",y),y.touchEnabled&&h(),e(),s.unshift(s.pop()),u.prepend(v.filter(":last-child")),v=a("li",u),g(-d(),"reset",0),-1!==y.fade&&v.not(":eq(1)").css("opacity",y.fade),y.buttons&&(t.append('<button class="previous" rel="-1">'+y.previous+'</button><button class="next" rel="1">'+y.next+"</button>"),a("button",t).click(function(){return p||(p=!0,clearInterval(o),f(parseInt(a(this).attr("rel"),10))),!1})),0!==y.speed&&(o=setInterval(function(){p||(p=!0,f(y.direction))},y.speed))),n};a.fn.queueSlider=function(c){return this.each(function(){var d=a(this);if(d.data("queueslider"))return d.data("queueslider");var e=new b(this,c);d.data("queueslider",e)})},a.fn.queueSlider.defaults={alignMode:"center",fade:.3,transitionSpeed:700,speed:7e3,direction:1,offScreen:!1,touchEnabled:!0,swipeThreshold:50,buttons:!0,previous:"Previous",next:"Next"}}(jQuery);