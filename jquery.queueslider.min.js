!function(a){var b=function(b,c){function d(){var a,b=0;switch(w.alignMode){case"center":a=(v-r[p])/-2;break;case"left":a=0;break;case"right":a=v-r[p]}for(b=0;p>b;b++)a+=r[b];return a}function e(){var b=0;a("li",t).each(function(c){if(w.offScreen){var d=a(this),e=d.innerWidth(),f=v-e;b+=r[c]=e+(f>0?f:0),d.css("width",r[c]+"px")}else b+=r[c]=a(this).innerWidth()}),t.css("width",b)}function f(b){p+=b,0>p?p=u:p>u&&(p=0),-1!==w.fade&&(a("li",t).eq(p).addClass("current").stop().fadeTo(w.transitionSpeed,1),a("li",t).eq(q).removeClass("current").stop().fadeTo(w.transitionSpeed,w.fade)),g(-d(),"slide")}function g(a,b,c){if(j){var d="translate3d("+a+"px, 0, 0)";c=void 0!==c?c:w.transitionSpeed/1e3,t.css("-"+k+"-transition-duration",c+"s"),t.css(l,d),"slide"===b&&t.bind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",function(){x(),t.unbind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd")})}else"slide"===b?t.stop().animate({left:a},{duration:w.transitionSpeed,complete:x}):t.css("left",a)}function h(){i={start:{x:0,y:0},end:{x:0,y:0}},s.bind("touchstart",y)}var i,j,k,l,m=this,n=!1,o=!1,p=1,q=1,r=[],s=a(b),t=a("ul.queue",s),u=a("li",t).length,v=a(window).width(),w=a.extend({},a.fn.queueSlider.defaults,c);a(window).resize(function(){o=!0,v=a(window).width(),e(),g(-d(),"reset",0),o=!1});var x=function(){if(u>2)if(p===u-1){var b=a("li:first-child",t);r.push(r.shift()),t.append(b),g(t.position().left+b.innerWidth(),"reset",0),p--}else if(0===p){var c=a("li:last-child",t);r.unshift(r.pop()),t.prepend(c),g(t.position().left+-c.innerWidth(),"reset",0),p=1}q=p,o=!1},y=function(a){o?a.preventDefault():(i.originalPos=t.position(),i.start.x=a.originalEvent.changedTouches[0].pageX,i.start.y=a.originalEvent.changedTouches[0].pageY,s.bind("touchmove",z),s.bind("touchend",A))},z=function(a){var b=a.originalEvent.changedTouches[0].pageX-i.start.x;g(i.originalPos.left+b,"reset",0)},A=function(a){s.unbind("touchmove",z),i.end.x=a.originalEvent.changedTouches[0].pageX,i.end.y=a.originalEvent.changedTouches[0].pageY;var b=i.end.x-i.start.x;Math.abs(b)>=w.swipeThreshold&&(0>b?m.nextSlide():m.previousSlide()),s.unbind("touchend",A)};return m.nextSlide=function(){o=!0,clearInterval(n),f(1)},m.previousSlide=function(){o=!0,clearInterval(n),f(-1)},m.getCurrent=function(){return p},u>1&&(j=function(){var a=document.createElement("div"),b=["WebkitPerspective","MozPerspective","OPerspective","msPerspective"];for(var c in b)if(void 0!==a.style[b[c]])return k=b[c].replace("Perspective","").toLowerCase(),l="-"+k+"-transform",!0;return!1}(),j&&t.css("-"+k+"-transition-timing-function",w),w.touchEnabled&&h(),e(),r.unshift(r.pop()),t.prepend(a("li:last-child",t)),g(-d(),"reset",0),-1!==w.fade&&a("li",t).not(":eq(1)").css("opacity",w.fade),w.buttons&&(s.append('<button class="previous" rel="-1">'+w.previous+'</button><button class="next" rel="1">'+w.next+"</button>"),a("button",s).click(function(){return o||(o=!0,clearInterval(n),f(parseInt(a(this).attr("rel"),10))),!1})),0!==w.speed&&(n=setInterval(function(){o||(o=!0,f(w.direction))},w.speed))),m};a.fn.queueSlider=function(c){return this.each(function(){var d=a(this);if(d.data("queueslider"))return d.data("queueslider");var e=new b(this,c);d.data("queueslider",e)})},a.fn.queueSlider.defaults={alignMode:"center",fade:.3,transitionSpeed:700,speed:7e3,direction:1,offScreen:!1,touchEnabled:!0,swipeThreshold:50,buttons:!0,previous:"Previous",next:"Next"}}(jQuery);