!function(a){var b=function(b,c){function d(){var a,b=0;switch(x.alignMode){case"center":a=(w-r[p])/-2;break;case"left":a=0;break;case"right":a=w-r[p]}for(b=0;p>b;b++)a+=r[b];return a}function e(){var b=0;u.each(function(c){if(x.offScreen){var d=a(this),e=d.innerWidth(),f=w-e;b+=r[c]=e+(f>0?f:0),d.css("width",r[c]+"px")}else b+=r[c]=a(this).innerWidth()}),t.css("width",b)}function f(a){p+=a,0>p?p=v:p>v&&(p=0),-1!==x.fade&&(u.eq(p).addClass("current").fadeTo(x.transitionSpeed,1),u.eq(q).removeClass("current").fadeTo(x.transitionSpeed,x.fade)),g(-d(),"slide")}function g(a,b,c){if(j){var d="translate3d("+a+"px, 0, 0)";c=void 0!==c?c:x.transitionSpeed/1e3,t.css("-"+k+"-transition-duration",c+"s"),t.css(l,d),"slide"===b&&setTimeout(function(){o&&y()},1e3*c+1)}else"slide"===b?t.animate({left:a},{duration:x.transitionSpeed,complete:y}):t.css("left",a)}function h(){i={start:{x:0,y:0},end:{x:0,y:0}},s.bind("touchstart",z)}var i,j,k,l,m=this,n=!1,o=!1,p=1,q=1,r=[],s=a(b),t=a("ul.queue",s),u=a("li",t),v=u.length,w=a(window).width(),x=a.extend({},a.fn.queueSlider.defaults,c);a(window).resize(function(){o=!0,w=a(window).width(),e(),g(-d(),"reset",0),o=!1});var y=function(){if(v>2)if(p===v-1){var b=u.filter(":first-child");r.push(r.shift()),g(t.position().left+b.innerWidth(),"reset",0),t.append(b),p--,u=a("li",t)}else if(0===p){var c=u.filter(":last-child");r.unshift(r.pop()),g(t.position().left+-c.innerWidth(),"reset",0),t.prepend(c),p=1,u=a("li",t)}q=p,o=!1},z=function(a){o?a.preventDefault():(i.originalPos=t.position(),i.start.x=a.originalEvent.changedTouches[0].pageX,i.start.y=a.originalEvent.changedTouches[0].pageY,s.bind("touchmove",A),s.bind("touchend",B))},A=function(a){var b=a.originalEvent.changedTouches[0].pageX-i.start.x;g(i.originalPos.left+b,"reset",0)},B=function(a){s.unbind("touchmove",A),i.end.x=a.originalEvent.changedTouches[0].pageX,i.end.y=a.originalEvent.changedTouches[0].pageY;var b=i.end.x-i.start.x;Math.abs(b)>=x.swipeThreshold?0>b?m.nextSlide():m.previousSlide():g(i.originalPos.left,"reset",0),s.unbind("touchend",B)};return m.nextSlide=function(){o||(o=!0,clearInterval(n),f(1))},m.previousSlide=function(){o||(o=!0,clearInterval(n),f(-1))},m.getCurrent=function(){return p},v>1&&(j=function(){var a=document.createElement("div"),b=["WebkitPerspective","MozPerspective","OPerspective","msPerspective"];for(var c in b)if(void 0!==a.style[b[c]])return k=b[c].replace("Perspective","").toLowerCase(),l="-"+k+"-transform",!0;return!1}(),j&&t.css("-"+k+"-transition-timing-function",x),x.touchEnabled&&h(),e(),r.unshift(r.pop()),t.prepend(u.filter(":last-child")),u=a("li",t),g(-d(),"reset",0),-1!==x.fade&&u.not(":eq(1)").css("opacity",x.fade),x.buttons&&(s.append('<button class="previous" rel="-1">'+x.previous+'</button><button class="next" rel="1">'+x.next+"</button>"),a("button",s).click(function(){return o||(o=!0,clearInterval(n),f(parseInt(a(this).attr("rel"),10))),!1})),0!==x.speed&&(n=setInterval(function(){o||(o=!0,f(x.direction))},x.speed))),m};a.fn.queueSlider=function(c){return this.each(function(){var d=a(this);if(d.data("queueslider"))return d.data("queueslider");var e=new b(this,c);d.data("queueslider",e)})},a.fn.queueSlider.defaults={alignMode:"center",fade:.3,transitionSpeed:700,speed:7e3,direction:1,offScreen:!1,touchEnabled:!0,swipeThreshold:50,buttons:!0,previous:"Previous",next:"Next"}}(jQuery);