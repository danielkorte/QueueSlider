!function(a){var b=function(b,c){function d(){var a,b=0;switch(z.alignMode){case"center":a=(y-t[r])/-2;break;case"left":a=0;break;case"right":a=y-t[r]}for(b=0;r>b;b++)a+=t[b];return a}function e(){var b=0;w.each(function(c){if(z.offScreen){var d=a(this),e=d.outerWidth(!0),f=y-e;b+=t[c]=e+(f>0?f:0),d.css("width",t[c]+"px")}else b+=t[c]=a(this).outerWidth(!0)}),v.css("width",b)}function f(a){r+=a,0>r?r=x:r>x&&(r=0),g(r,s),h(-d(),"slide")}function g(a,b,c){-1!==z.fade&&(c=void 0===c?z.transitionSpeed:c,w.eq(a).addClass("current").children("img").fadeTo(c,1),w.eq(b).removeClass("current").children("img").fadeTo(c,z.fade))}function h(a,b,c){if(k){c=void 0!==c?c:z.transitionSpeed/1e3;var d={};d[n]=c+"s",d[m]="translate3d("+a+"px, 0, 0)",v.css(d),"slide"===b&&setTimeout(function(){q&&B()},1e3*c+1)}else"slide"===b?v.animate({left:a},{duration:z.transitionSpeed,complete:B}):v.css("left",a)}function i(){j={start:{x:0,y:0},end:{x:0,y:0}},u.bind("touchstart",C)}var j,k,l,m,n,o=this,p=!1,q=!1,r=1,s=1,t=[],u=a(b),v=a("ul.queue",u),w=a("li",v),x=w.length,y=a(window).width(),z=a.extend({},a.fn.queueSlider.defaults,c),A=function(){q=!0,y=a(window).width(),e(),h(-d(),"reset",0),q=!1},B=function(){r===x-1?(r=1,g(1,x-1,0),h(-d(),"reset",0)):0===r&&(r=x-2,g(x-2,0,0),h(-d(),"reset",0)),s=r,q=!1},C=function(a){q?a.preventDefault():(j.originalPos=v.position(),j.start.x=a.originalEvent.changedTouches[0].pageX,j.start.y=a.originalEvent.changedTouches[0].pageY,u.bind("touchmove",D),u.bind("touchend",E))},D=function(a){var b=Math.abs(a.originalEvent.changedTouches[0].pageX-j.start.x),c=Math.abs(a.originalEvent.changedTouches[0].pageY-j.start.y),d=a.originalEvent.changedTouches[0].pageX-j.start.x;3*b>c&&a.preventDefault(),h(j.originalPos.left+d,"reset",0)},E=function(a){u.unbind("touchmove",D),j.end.x=a.originalEvent.changedTouches[0].pageX,j.end.y=a.originalEvent.changedTouches[0].pageY;var b=j.end.x-j.start.x;Math.abs(b)>=z.swipeThreshold?0>b?o.nextSlide():o.previousSlide():h(j.originalPos.left,"reset",0),u.unbind("touchend",E)};return o.nextSlide=function(){q||(q=!0,clearInterval(p),f(1))},o.previousSlide=function(){q||(q=!0,clearInterval(p),f(-1))},o.getCurrent=function(){return r},x>1&&(k=function(){var a=document.createElement("div"),b=["WebkitPerspective","MozPerspective","OPerspective","msPerspective"];for(var c in b)if(void 0!==a.style[b[c]])return l=b[c].replace("Perspective","").toLowerCase(),m="-"+l+"-transform",n="-"+l+"-transition-duration",!0;return!1}(),z.touchEnabled&&i(),v.prepend(w.eq(x-1).clone()),v.append(w.eq(0).clone().removeClass("current")),w=a("li",v),x++,x++,e(),h(-d(),"reset",0),-1!==z.fade&&w.not(":eq(1)").children("img").fadeTo(0,z.fade),z.buttons&&(u.append('<button class="previous" rel="-1">'+z.previous+'</button><button class="next" rel="1">'+z.next+"</button>"),a("button",u).click(function(){return q||(q=!0,clearInterval(p),f(parseInt(a(this).attr("rel"),10))),!1})),0!==z.speed&&(p=setInterval(function(){q||(q=!0,f(z.direction))},z.speed)),a(window).bind("resize",A)),o};a.fn.queueSlider=function(c){return this.each(function(){var d=a(this);if(d.data("queueslider"))return d.data("queueslider");var e=new b(this,c);d.data("queueslider",e)})},a.fn.queueSlider.defaults={alignMode:"center",fade:.3,transitionSpeed:700,speed:7e3,direction:1,offScreen:!1,touchEnabled:!0,swipeThreshold:50,buttons:!0,previous:"Previous",next:"Next"}}(jQuery);