/*
 * jQuery Queue Slider v1.0
 * http://danielkorte.com
 *
 * Free to use and abuse under the MIT license.
 * http://www.opensource.org/licenses/mit-license.php
 * 
 * August 2011
 */

(function(b){var a=function(i,s){var d=false,p=false,o=2,l=2,f=new Array(),c=b(i),k=b("ul.queue",c),n=b("img",k).size(),m=b(window).width(),e=b.extend({},b.fn.queueSlider.defaults,s);b(window).resize(function(){p=true;m=b(window).width();if(e.offScreen){h()}k.css("left",-q());p=false});function g(){b("li",k).each(function(t,u){b(this).attr("class","slide-"+(t+1))})}function r(t){o+=t;if(o<1){o=n}else{if(o>n){o=1}}}function q(){var u=0,t=o-1,v=(m-f[t])/-2;for(u=0;u<t;u++){v+=f[u]}return v}function h(){var t=0;b("li",k).each(function(v,x){if(e.offScreen){var u=b(this),w=u.width(),y=m-w;t+=f[v]=w+(y>0?y:0);u.css("width",f[v]+"px")}else{t+=f[v]=b(this).width()}});k.css("width",t)}function j(){var u={duration:e.transitionSpeed,queue:false};if(o===n){var v=b("li.slide-1",k);f.push(f.shift());k.css("left",k.position().left+v.width()).append(v);g();o--;l--}else{if(o===1){var t=b("li:last-child",k);f.unshift(f.pop());k.css("left",k.position().left+-t.width()).prepend(t);g();o=2;l=3}}if(e.fade!==-1){b("li.slide-"+o,k).animate({opacity:1},u);b("li.slide-"+l,k).animate({opacity:e.fade},u)}u.complete=function(){p=false};k.animate({left:-q()},u);l=o}if(n>2){h();f.unshift(f.pop());k.css("left",-q()).prepend(b("li:last-child",k));g();if(e.fade!==-1){b("li",k).not(".slide-2").css("opacity",e.fade)}if(e.buttons){c.append('<button class="previous" rel="-1">'+e.previous+'</button><button class="next" rel="1">'+e.next+"</button>");b("button",c).click(function(){if(!p){p=true;r(parseInt(b(this).attr("rel")));clearInterval(d);j()}return false})}if(e.speed!==0){d=setInterval(function(){if(!p){p=true;r(e.direction);j()}},e.speed)}}else{c.removeClass("queueslider")}};b.fn.queueSlider=function(c){return this.each(function(f,g){var e=b(this);if(e.data("queueslider")){return e.data("queueslider")}var d=new a(this,c);e.data("queueslider",d)})};b.fn.queueSlider.defaults={fade:0.3,transitionSpeed:700,speed:7000,direction:1,offScreen:false,buttons:true,previous:"Previous",next:"Next"}})(jQuery);